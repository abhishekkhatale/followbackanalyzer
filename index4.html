<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Followers Analyzer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #ffffff;
      min-height: 100vh;
      padding: 20px;
      color: #000000;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
    }

    .header {
      background: #000000;
      color: #ffffff;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .header p {
      font-size: 14px;
      opacity: 0.8;
    }

    .input-section {
      padding: 30px;
      background: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
    }

    .input-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .input-item {
      display: flex;
      flex-direction: column;
    }

    .input-item label {
      font-weight: 600;
      margin-bottom: 8px;
      color: #000000;
      font-size: 14px;
    }

    .input-item textarea {
      padding: 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      resize: vertical;
      min-height: 150px;
      transition: all 0.2s;
      background: #ffffff;
      color: #000000;
    }

    .input-item textarea:focus {
      outline: none;
      border-color: #000000;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    }

    .button-group {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    button {
      padding: 10px 24px;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
    }

    .btn-analyze {
      background: #000000;
      color: #ffffff;
    }

    .btn-analyze:hover {
      background: #1a1a1a;
    }

    .btn-clear {
      background: #e5e7eb;
      color: #000000;
    }

    .btn-clear:hover {
      background: #d1d5db;
    }

    .analysis-section {
      display: none;
      padding: 30px;
    }

    .analysis-section.active {
      display: block;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: #000000;
      color: #ffffff;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border: 1px solid #1f2937;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 12px;
      opacity: 0.8;
    }

    .tabs {
      display: flex;
      gap: 0;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab-button {
      padding: 12px 16px;
      border: none;
      background: transparent;
      color: #6b7280;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab-button:hover {
      color: #000000;
    }

    .tab-button.active {
      color: #000000;
      border-bottom-color: #000000;
    }

    .search-box {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
    }

    .search-box input {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      transition: all 0.2s;
      background: #ffffff;
      color: #000000;
    }

    .search-box input::placeholder {
      color: #9ca3af;
    }

    .search-box input:focus {
      outline: none;
      border-color: #000000;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    }

    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
    }

    th {
      padding: 12px;
      text-align: left;
      font-weight: 600;
      color: #000000;
      font-size: 13px;
    }

    td {
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
      font-size: 13px;
      color: #000000;
    }

    tr:hover {
      background: #f9fafb;
    }

    .username {
      color: #000000;
      font-weight: 500;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #9ca3af;
    }

    .empty-state-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .error {
      background: #fee2e2;
      color: #991b1b;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      display: none;
      border: 1px solid #fecaca;
    }

    .error.show {
      display: block;
    }

    @media (max-width: 768px) {
      .input-group {
        grid-template-columns: 1fr;
      }

      .stats {
        grid-template-columns: 1fr;
      }

      .button-group {
        flex-direction: column;
      }

      button {
        width: 100%;
      }

      .tabs {
        flex-direction: column;
      }

      .tab-button {
        border-bottom: 1px solid #e5e7eb;
        border-right: 2px solid transparent;
      }

      .tab-button.active {
        border-right-color: #000000;
        border-bottom-color: transparent;
      }
    }
  </style>

</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Instagram Followers Analyzer</h1>
      <p>Upload your followers and following JSON data to analyze your relationships</p>
    </div>

    <div class="input-section">
      <div class="error" id="error"></div>
      
      <div class="input-group">
        <div class="input-item">
          <label for="followersJson">Followers JSON</label>
          <textarea id="followersJson" placeholder="Paste your followers.json content here..."></textarea>
        </div>
        <div class="input-item">
          <label for="followingJson">Following JSON</label>
          <textarea id="followingJson" placeholder="Paste your following.json content here..."></textarea>
        </div>
      </div>

      <div class="button-group">
        <button class="btn-analyze" onclick="analyzeData()">Analyze Data</button>
        <button class="btn-clear" onclick="clearData()">Clear All</button>
      </div>
    </div>

    <div class="analysis-section active" id="analysisSection">
      <div class="stats">
        <div class="stat-card">
          <div class="stat-value" id="followerCount">0</div>
          <div class="stat-label">Total Followers</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="followingCount">0</div>
          <div class="stat-label">Total Following</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="notFollowingBackCount">0</div>
          <div class="stat-label">Don't Follow Back</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="notFollowedByCount">0</div>
          <div class="stat-label">You Don't Follow Back</div>
        </div>
      </div>

      <div class="tabs">
        <button class="tab-button active" onclick="switchTab(0)">Followers</button>
        <button class="tab-button" onclick="switchTab(1)">Following</button>
        <button class="tab-button" onclick="switchTab(2)">Don't Follow Back</button>
        <button class="tab-button" onclick="switchTab(3)">You Don't Follow Back</button>
      </div>

      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search usernames..." onkeyup="filterTable()">
      </div>

      <div class="table-wrapper">
        <table id="dataTable">
          <thead>
            <tr>
              <th>Username</th>
              <th>Full Name</th>
              <th>User ID</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <tr>
              <td colspan="3" class="empty-state">
                <div class="empty-state-icon">üìä</div>
                <div>Upload JSON files to see data</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    let followers = [];
    let following = [];
    let currentTab = 0;
    let filteredData = [];

    function showError(message) {
      const errorEl = document.getElementById('error');
      errorEl.textContent = message;
      errorEl.classList.add('show');
      setTimeout(() => errorEl.classList.remove('show'), 5000);
    }

    function parseInstagramJSON(jsonString) {
      try {
        const data = JSON.parse(jsonString);
        const usernames = [];

        if (Array.isArray(data) && data.length > 0 && data[0].string_list_data) {
          data.forEach(item => {
            if (item.string_list_data && Array.isArray(item.string_list_data)) {
              item.string_list_data.forEach(entry => {
                if (entry.value) {
                  usernames.push({
                    username: entry.value,
                    fullName: entry.value,
                    userId: entry.timestamp || ''
                  });
                }
              });
            }
          });
        }
        else if (data.relationships_following && Array.isArray(data.relationships_following)) {
          data.relationships_following.forEach(item => {
            if (item.title) {
              usernames.push({
                username: item.title,
                fullName: item.title,
                userId: item.timestamp || ''
              });
            }
          });
        }

        return usernames;
      } catch (error) {
        showError('Invalid JSON format: ' + error.message);
        return [];
      }
    }

    function analyzeData() {
      const followersJson = document.getElementById('followersJson').value.trim();
      const followingJson = document.getElementById('followingJson').value.trim();

      if (!followersJson || !followingJson) {
        showError('Please paste both followers and following JSON data');
        return;
      }

      followers = parseInstagramJSON(followersJson);
      following = parseInstagramJSON(followingJson);

      if (followers.length === 0 || following.length === 0) {
        showError('Could not parse JSON data. Please check the format.');
        return;
      }

      updateStats();
      switchTab(0);
    }

    function updateStats() {
      const followerNames = followers.map(u => u.username.toLowerCase());
      const followingNames = following.map(u => u.username.toLowerCase());

      const notFollowingBack = following.filter(u => 
        !followerNames.includes(u.username.toLowerCase())
      );

      const notFollowedBy = followers.filter(u => 
        !followingNames.includes(u.username.toLowerCase())
      );

      document.getElementById('followerCount').textContent = followers.length;
      document.getElementById('followingCount').textContent = following.length;
      document.getElementById('notFollowingBackCount').textContent = notFollowingBack.length;
      document.getElementById('notFollowedByCount').textContent = notFollowedBy.length;
    }

    function switchTab(tabIndex) {
      currentTab = tabIndex;
      
      document.querySelectorAll('.tab-button').forEach((btn, idx) => {
        btn.classList.toggle('active', idx === tabIndex);
      });

      let data = [];
      const followerNames = followers.map(u => u.username.toLowerCase());
      const followingNames = following.map(u => u.username.toLowerCase());

      switch(tabIndex) {
        case 0:
          data = followers;
          break;
        case 1:
          data = following;
          break;
        case 2:
          data = following.filter(u => 
            !followerNames.includes(u.username.toLowerCase())
          );
          break;
        case 3:
          data = followers.filter(u => 
            !followingNames.includes(u.username.toLowerCase())
          );
          break;
      }

      filteredData = data;
      renderTable(data);
      document.getElementById('searchInput').value = '';
    }

    function renderTable(data) {
      const tableBody = document.getElementById('tableBody');
      
      if (data.length === 0) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="3" class="empty-state">
              <div class="empty-state-icon">üîç</div>
              <div>No users found</div>
            </td>
          </tr>
        `;
        return;
      }

      tableBody.innerHTML = data.map(user => `
        <tr>
          <td class="username">@${user.username}</td>
          <td>${user.fullName}</td>
          <td>${user.userId || '‚Äî'}</td>
        </tr>
      `).join('');
    }

    function filterTable() {
      const searchValue = document.getElementById('searchInput').value.toLowerCase();
      
      const filtered = filteredData.filter(user =>
        user.username.toLowerCase().includes(searchValue) ||
        user.fullName.toLowerCase().includes(searchValue)
      );

      renderTable(filtered);
    }

    function clearData() {
      document.getElementById('followersJson').value = '';
      document.getElementById('followingJson').value = '';
      document.getElementById('searchInput').value = '';
      followers = [];
      following = [];
      filteredData = [];
      
      document.querySelectorAll('.stat-value').forEach(el => {
        el.textContent = '0';
      });

      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = `
        <tr>
          <td colspan="3" class="empty-state">
            <div class="empty-state-icon">üìä</div>
            <div>Upload JSON files to see data</div>
          </td>
        </tr>
      `;
    }
  </script>
</body>
</html>
